{"version":3,"sources":["../src/logger.ts"],"sourcesContent":["import winston from \"winston\";\nimport { ErrorRes } from \"./errorHandler\";\n\nexport class Logger {\n  error(err: ErrorRes) {\n    throw new Error(\"Method not implemented.\");\n  }\n  public config: string;\n  constructor(nodeEnv: string) {\n    this.config = nodeEnv;\n  }\n  /**\n   * checks if the info passed through the logger is an error, if true it passes the stack as the message to the info and returns\n   */\n  private enumerateErrorFormat = winston.format((info: any) => {\n    if (info instanceof Error) {\n      Object.assign(info, { message: info.stack });\n    }\n    return info;\n  });\n\n  public logger = winston.createLogger({\n    // @ts-expect-error\n    level: this.config === \"development\" ? \"debug\" : \"info\",\n    format: winston.format.combine(\n      this.enumerateErrorFormat(),\n      // @ts-expect-error\n      this.config === \"development\"\n        ? winston.format.colorize()\n        : winston.format.uncolorize(),\n      winston.format.splat(),\n      winston.format.printf(({ level, message }) => `${level}: ${message}`)\n    ),\n    transports: [\n      new winston.transports.Console({\n        stderrLevels: [\"error\"],\n      }),\n    ],\n  });\n}\n"],"names":["Logger","error","err","Error","constructor","nodeEnv","enumerateErrorFormat","winston","format","info","Object","assign","message","stack","logger","createLogger","level","config","combine","colorize","uncolorize","splat","printf","transports","Console","stderrLevels"],"mappings":"AAAA;;;;+BAGaA;;aAAAA;;gDAHO;;;;;;AAGb,IAAA,AAAMA,SAAN,MAAMA;IACXC,MAAMC,GAAa,EAAE;QACnB,MAAM,IAAIC,MAAM,2BAA2B;IAC7C;IAEAC,YAAYC,OAAe,CAAE;aAMrBC,uBAAuBC,gBAAO,CAACC,MAAM,CAAC,CAACC,OAAc;YAC3D,IAAIA,gBAAgBN,OAAO;gBACzBO,OAAOC,MAAM,CAACF,MAAM;oBAAEG,SAASH,KAAKI,KAAK;gBAAC;YAC5C,CAAC;YACD,OAAOJ;QACT;aAEOK,SAASP,gBAAO,CAACQ,YAAY,CAAC;YAEnCC,OAAO,IAAI,CAACC,MAAM,KAAK,gBAAgB,UAAU,MAAM;YACvDT,QAAQD,gBAAO,CAACC,MAAM,CAACU,OAAO,CAC5B,IAAI,CAACZ,oBAAoB,IAEzB,IAAI,CAACW,MAAM,KAAK,gBACZV,gBAAO,CAACC,MAAM,CAACW,QAAQ,KACvBZ,gBAAO,CAACC,MAAM,CAACY,UAAU,EAAE,EAC/Bb,gBAAO,CAACC,MAAM,CAACa,KAAK,IACpBd,gBAAO,CAACC,MAAM,CAACc,MAAM,CAAC,CAAC,EAAEN,MAAK,EAAEJ,QAAO,EAAE,GAAK,CAAC,EAAEI,MAAM,EAAE,EAAEJ,QAAQ,CAAC;YAEtEW,YAAY;gBACV,IAAIhB,gBAAO,CAACgB,UAAU,CAACC,OAAO,CAAC;oBAC7BC,cAAc;wBAAC;qBAAQ;gBACzB;aACD;QACH;QA7BE,IAAI,CAACR,MAAM,GAAGZ;IAChB;AA6BF"}