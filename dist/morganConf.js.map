{"version":3,"sources":["../src/morganConf.ts"],"sourcesContent":["import morgan from \"morgan\";\nimport { Logger } from \"./logger\";\nconst logger = new Logger(\"developement\");\n\nmorgan.token(\"message\", (req: any, res: any) => res.locals.errorMessage || \"\");\n\nexport class MorganFactory {\n  constructor() {}\n\n  private getIpFormat = () =>\n    logger.config === \"production\" ? \":remote-addr - \" : \"\";\n  successResponseFormat = `${this.getIpFormat()}:method :url :status - :response-time ms`;\n  errorResponseFormat = `${this.getIpFormat()}:method :url :status - :response-time ms - message: :message`;\n\n  public successHandler = morgan(this.successResponseFormat, {\n    skip: (req: any, res: any) => res.statusCode >= 400,\n    stream: { write: (message: string) => logger.logger.info(message.trim()) },\n  });\n\n  public errorHandler = morgan(this.errorResponseFormat, {\n    skip: (req: any, res: any) => res.statusCode < 400,\n    stream: { write: (message: string) => logger.logger.error(message.trim()) },\n  });\n}\n"],"names":["MorganFactory","logger","Logger","morgan","token","req","res","locals","errorMessage","constructor","getIpFormat","config","successResponseFormat","errorResponseFormat","successHandler","skip","statusCode","stream","write","message","info","trim","errorHandler","error"],"mappings":"AAAA;;;;+BAMaA;;aAAAA;;+CANM;wBACI;;;;;;AACvB,MAAMC,SAAS,IAAIC,cAAM,CAAC;AAE1BC,eAAM,CAACC,KAAK,CAAC,WAAW,CAACC,KAAUC,MAAaA,IAAIC,MAAM,CAACC,YAAY,IAAI;AAEpE,IAAA,AAAMR,gBAAN,MAAMA;IACXS,aAAc;aAENC,cAAc,IACpBT,OAAOU,MAAM,KAAK,eAAe,oBAAoB,EAAE;aACzDC,wBAAwB,CAAC,EAAE,IAAI,CAACF,WAAW,GAAG,wCAAwC,CAAC;aACvFG,sBAAsB,CAAC,EAAE,IAAI,CAACH,WAAW,GAAG,4DAA4D,CAAC;aAElGI,iBAAiBX,IAAAA,eAAM,EAAC,IAAI,CAACS,qBAAqB,EAAE;YACzDG,MAAM,CAACV,KAAUC,MAAaA,IAAIU,UAAU,IAAI;YAChDC,QAAQ;gBAAEC,OAAO,CAACC,UAAoBlB,OAAOA,MAAM,CAACmB,IAAI,CAACD,QAAQE,IAAI;YAAI;QAC3E;aAEOC,eAAenB,IAAAA,eAAM,EAAC,IAAI,CAACU,mBAAmB,EAAE;YACrDE,MAAM,CAACV,KAAUC,MAAaA,IAAIU,UAAU,GAAG;YAC/CC,QAAQ;gBAAEC,OAAO,CAACC,UAAoBlB,OAAOA,MAAM,CAACsB,KAAK,CAACJ,QAAQE,IAAI;YAAI;QAC5E;IAfe;AAgBjB"}